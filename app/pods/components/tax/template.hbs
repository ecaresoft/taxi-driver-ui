<div class="tax-component {{if this.shouldDisplayOpenCard "open"}}" local-class="tax-component">

  {{#if this.shouldDisplayCollapsibleButton}}
    <button type="button" local-class="collapsible" {{on "click" (fn this.toggleOpenCard)}}>
      <div><strong>Tax Name: </strong>{{this.taxName}} </div>
      <aside class="expand-img" />
    </button>
  {{/if}}

  <div local-class="content {{if this.shouldContainHardInput "hard-input"}}" class="content">

    {{#if this.shouldDisplayCountryField}}
      <div local-class="input-field country-input">
        <label>Country: </label>
        <select>
          {{#each this.countryOptions as |countryOption|}}
            <option value="{{countryOption.value}}">
              {{countryOption.optText}}
            </option>
          {{/each}}
        </select>
      </div>
    {{/if}}

    {{#if this.shouldDisplayInputs}}
      <div local-class="input-field name-input">
        <label>Tax Name: </label>
        <input type="text" value="{{this.taxName}}" spellcheck="false">
      </div>
    {{/if}}

    <div local-class="input-field date-input">
      <label>Valid from: </label>
      <EmberFlatpickr local-class="date-picker" @value={{this.validFrom}} @onChange={{null}}
        @placeholder="Select Date" />
      <img src="/assets/icons/event-24px.svg" alt="" role="presentation" local-class="calendar-icon" />
    </div>

    <div local-class="input-field date-input">
      <label>Valid until: </label>
      <EmberFlatpickr local-class="date-picker" @value={{this.validUntil}} @onChange={{null}}
        @placeholder="Select Date" />
      <img src="/assets/icons/event-24px.svg" alt="" role="presentation" local-class="calendar-icon" />
    </div>

    {{#if this.shouldDisplayInputs}}
      <div local-class="input-field product-category-input">
        <label>Product category:</label>
        <input type="text" value="{{this.productCategory}}" spellcheck="false">
      </div>
    {{else}}
      <div local-class="input-field product-category-input">
        <label>Product category:</label>
        <span>{{this.productCategory}}</span>
      </div>
    {{/if}}

    <div local-class="input-field bp-input options-input">
      <label>Business Partner VAT:</label>
      <select>
        {{#each this.bpVATOptions as |vatOption|}}
          {{#if (eq vatOption.value this.bpVATSelected)}}
            <option value="{{vatOption.value}}" selected>
              {{vatOption.optText}}
            </option>
          {{else}}
            <option value="{{vatOption.value}}">
              {{vatOption.optText}}
            </option>
          {{/if}}
        {{/each}}
      </select>
    </div>

    <div local-class="input-field witholding-tax options-input">
      <label>Witholding TAX:</label>
      <select>
        {{#each this.witholdingTAXOptions as |taxOption|}}
          {{#if (eq taxOption.value this.witholdingTAXSelected)}}
            <option value="{{taxOption.value}}" selected>
              {{taxOption.optText}}
            </option>
          {{else}}
            <option value="{{taxOption.value}}">
              {{taxOption.optText}}
            </option>
          {{/if}}
        {{/each}}
      </select>
    </div>

    <div local-class="input-field tax-type">
      <label>TAX Type:</label>
      <input type="checkbox" /><span>Income</span>
      <input type="checkbox" /><span>Expense</span>
    </div>

    {{#if this.shouldDisplayInputs}}
      <div local-class="input-field tax-rate">
        <label>TAX Rate:</label>
        <input type="number" spellcheck="false">%
      </div>
    {{else}}
      <div local-class="input-field tax-rate">
        <label>TAX Rate:</label>
        <span>{{this.taxRate}}%</span>
      </div>
    {{/if}}

    {{#if this.extraFields}}
      <ExtraField @field={{this.extraFields}} @editMode={{this.editMode}} />
    {{/if}}

    {{#if this.newTaxMode}}
      <div local-class="edit-buttons">
        <button type="button" {{on "click" (fn this.closeNewTaxModal)}}>DISCARD</button>
        <button type="submit" {{on "click" (fn this.openSaveModal)}}>SAVE</button>
      </div>
    {{/if}}
    {{#if this.editMode}}
      <div local-class="edit-buttons">
        <button type="button" {{on "click" (fn this.discardTaxEditions)}}>DISCARD</button>
        <button type="submit" {{on "click" (fn this.openSaveModal)}}>SAVE</button>
      </div>
    {{/if}}

    {{#if this.shouldDisplayMoreButton}}
      <div local-class="display-menu dropdown">
        <button local-class="more dropbtn {{if this.shouldDisplayMorePanel "open" "closed"}}" type="button"
          {{on "click" (fn this.toggleOptionsPanel)}} />
        {{#if this.shouldDisplayMorePanel}}
          <div local-class="dropdown-content">
            <button {{on "click" (fn this.toggleEditMode)}} type="button"><img src="/assets/icons/create-24px.svg"
                alt="presentation" />Edit</button>
            <button type="button"><img src="/assets/icons/delete-24px.svg" alt="presentation" />Delete</button>
          </div>
        {{/if}}
      </div>
    {{/if}}

    {{#if this.shouldDisplaySaveModal}}
      <ModalDialog @translucentOverlay="true">
        <div class="save-editions-modal">
          <button type="button" class="close-modal-icon" {{on "click" (fn this.closeModals)}} />
          <img src="/assets/icons/warning-24px.svg" class="warning-img" alt="" role="presentation" />
          <p>Are you sure you want to save these changes?</p>
          {{#if this.editMode}}
            <div class="edit-buttons">
              <button type="button" {{on "click" (fn this.closeModals)}}>DISCARD</button>
              <button type="submit" {{on "click" (fn this.saveTaxEditions)}}>SAVE</button>
            </div>
          {{/if}}
          {{#if this.newTaxMode}}
            <div class="edit-buttons">
              <button type="button" {{on "click" (fn this.closeNewTaxModal)}}>DISCARD</button>
              <button type="submit" {{on "click" (fn this.saveNewTax)}}>SAVE</button>
            </div>
          {{/if}}
        </div>
      </ModalDialog>
    {{/if}}

    {{#if this.shouldDisplayConfirmationModal}}
      <ModalDialog @translucentOverlay="true">
        {{#if this.editMode}}
          <div class="confirmation-modal">
            <button type="button" class="close-modal-icon" {{on "click" (fn this.finishTaxEditionsSave)}} />
            <p>Changes have been successfully saved!</p>
          </div>
        {{/if}}
        {{#if this.newTaxMode}}
          <div class="confirmation-modal">
            <button type="button" class="close-modal-icon" {{on "click" (fn this.closeNewTaxModal)}} />
            <p>Changes have been successfully saved!</p>
          </div>
        {{/if}}
      </ModalDialog>
    {{/if}}

  </div>

</div>
